{
  "version": 3,
  "sources": ["../CuttleGame.ts"],
  "sourcesContent": ["/**\n * Cuttle - Combat Card Game\n *\n * A card game played with a standard 52-card deck (or 54 for 3+ players).\n * Players race to accumulate 21+ points in point cards while disrupting\n * opponents using one-off effects, permanents, and scuttling.\n *\n * Card abilities:\n * - A-10: Can be played as point cards (worth their rank, A=1)\n * - A: One-off - Move all point cards to scrap\n * - 2: One-off - Destroy a permanent OR counter a one-off\n * - 3: One-off - Retrieve a card from scrap pile\n * - 4: One-off - Opponent discards 2 cards (target one opponent in 3+ players)\n * - 5: One-off - Draw 2 cards (or discard 1 draw 3 in standard)\n * - 6: One-off - Move all permanents to scrap\n * - 7: One-off - Draw and immediately play a card\n * - 8: Permanent - Opponent's hand is revealed (\"glasses\")\n *      (In Cutthroat: reveals ALL opponents' hands)\n * - 9: One-off - Return a card to its controller's hand\n *      (In Cutthroat: target also skips their next turn)\n * - 10: Point card only (no special effect)\n * - J: Permanent - Take control of target point card\n * - Q: Permanent - Protect your other cards from targeting\n * - K: Permanent - Reduce point goal (21 -> 14 -> 10 -> 7 -> 5)\n * - Joker (Cutthroat only): Permanent - Steal a royal (8, Q, K, J)\n *\n * Variants:\n * - classic: Original 2-player rules\n * - standard: cuttle.cards 2-player rules (5 draws 3, 9 freezes, 4K wins)\n * - cutthroat: 3-player free-for-all with Jokers\n *\n * Win: First to reach point goal wins. Draw if 3 consecutive passes.\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport const SUITS = [\"clubs\", \"diamonds\", \"hearts\", \"spades\"] as const;\nexport type Suit = (typeof SUITS)[number];\n\nexport const RANKS = [\"A\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"J\", \"Q\", \"K\"] as const;\nexport type Rank = (typeof RANKS)[number];\n\nexport interface Card {\n  rank: Rank;\n  suit: Suit;\n  id: number; // Unique identifier for the card\n  isJoker?: boolean; // True for Joker cards (Cutthroat mode)\n}\n\nexport interface PointCard {\n  card: Card;\n  attachedJacks: Card[]; // Jacks attached to this point card\n  controller: number; // Current controller (may differ from original player)\n}\n\nexport interface Permanent {\n  card: Card;\n  type: \"eight\" | \"queen\" | \"king\" | \"joker\";\n  stolenFromPlayer?: number; // For Jokers: which player the royal was stolen from\n}\n\nexport interface PlayerState {\n  hand: Card[];\n  pointCards: PointCard[]; // Point cards this player originally played\n  permanents: Permanent[]; // 8s, Qs, Ks on this player's side\n}\n\nexport type GamePhase =\n  | \"play\" // Current player takes an action\n  | \"counter\" // Opponent can counter with a 2\n  | \"resolve_three\" // Choose a card from scrap for 3\n  | \"resolve_four\" // Opponent choosing cards to discard\n  | \"resolve_five_discard\" // Discard a card before drawing (standard)\n  | \"resolve_seven\" // Must play the drawn card (classic)\n  | \"resolve_seven_choose\" // Choose one of two revealed cards (standard)\n  | \"resolve_nine\" // Choose target for 9\n  | \"complete\";\n\nexport interface PendingOneOff {\n  card: Card;\n  player: number;\n  target?: { cardId: number; type: \"permanent\" | \"pointCard\" };\n  targetPlayer?: number; // Target player for 4 one-off in 3+ player games\n  counterChain: Card[]; // Stack of 2s trying to counter\n}\n\nexport interface CuttleGameState {\n  players: PlayerState[];\n  deck: Card[];\n  scrap: Card[];\n  currentPlayer: number;\n  phase: GamePhase;\n  pendingOneOff: PendingOneOff | null;\n  sevenDrawnCard: Card | null; // Card drawn by 7 that must be played (classic)\n  sevenRevealedCards: Card[] | null; // Two cards revealed by 7 (standard)\n  fiveDiscardPending: boolean; // Whether player needs to discard for 5 (standard)\n  frozenCardIds: number[]; // Cards that can't be played this turn (standard 9)\n  discardCount: number; // Cards opponent still needs to discard for 4\n  discardingPlayer: number | null; // Which player is discarding for 4 (3+ players)\n  skipTurnPlayers: number[]; // Players who skip their next turn (Cutthroat 9)\n  consecutivePasses: number;\n  winner: number | null;\n  isDraw: boolean;\n  lastAction: string | null;\n  turnNumber: number;\n}\n\nexport type CuttleVariant = \"classic\" | \"standard\" | \"cutthroat\";\n\nexport interface CuttleConfig {\n  seed?: number | null;\n  handLimit?: number;\n  variant?: CuttleVariant;\n}\n\n// ============================================================================\n// Constants\n// ============================================================================\n\nconst HAND_LIMIT_2PLAYER = 8;\nconst HAND_LIMIT_CUTTHROAT = 7;\nconst BASE_GOAL = 21;\nconst BASE_GOAL_CUTTHROAT = 14;\nconst KING_GOALS_CLASSIC = [14, 10, 7, 5]; // 1K, 2K, 3K, 4K\nconst KING_GOALS_STANDARD = [14, 10, 5, 0]; // 1K, 2K, 3K, 4K (4K = instant win)\nconst KING_GOALS_CUTTHROAT = [9, 5, 0]; // 1K, 2K, 3K (3K = instant win)\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\nfunction getRankValue(rank: Rank): number {\n  if (rank === \"A\") return 1;\n  if (rank === \"J\") return 11;\n  if (rank === \"Q\") return 12;\n  if (rank === \"K\") return 13;\n  return parseInt(rank);\n}\n\nfunction getPointValue(rank: Rank): number {\n  const value = getRankValue(rank);\n  return value <= 10 ? value : 0;\n}\n\nfunction getSuitValue(suit: Suit): number {\n  return SUITS.indexOf(suit);\n}\n\nfunction canScuttle(attacker: Card, target: Card): boolean {\n  const attackerValue = getRankValue(attacker.rank);\n  const targetValue = getRankValue(target.rank);\n\n  if (attackerValue > targetValue) return true;\n  if (attackerValue === targetValue) {\n    return getSuitValue(attacker.suit) > getSuitValue(target.suit);\n  }\n  return false;\n}\n\nfunction isPointRank(rank: Rank): boolean {\n  const value = getRankValue(rank);\n  return value >= 1 && value <= 10;\n}\n\nfunction cardToString(card: Card): string {\n  return `${card.rank}${card.suit[0].toUpperCase()}`;\n}\n\n// ============================================================================\n// Seeded Random\n// ============================================================================\n\nclass SeededRandom {\n  private seed: number;\n\n  constructor(seed?: number) {\n    this.seed = seed ?? Date.now();\n  }\n\n  next(): number {\n    this.seed = (this.seed * 1103515245 + 12345) & 0x7fffffff;\n    return this.seed / 0x7fffffff;\n  }\n\n  shuffle<T>(array: T[]): T[] {\n    const result = [...array];\n    for (let i = result.length - 1; i > 0; i--) {\n      const j = Math.floor(this.next() * (i + 1));\n      [result[i], result[j]] = [result[j], result[i]];\n    }\n    return result;\n  }\n}\n\n// ============================================================================\n// CuttleGame Class\n// ============================================================================\n\nexport class CuttleGame {\n  private config: Required<CuttleConfig>;\n  private rng: SeededRandom;\n  private state: CuttleGameState;\n\n  constructor(config: CuttleConfig = {}) {\n    const variant = config.variant ?? \"classic\";\n    const defaultHandLimit = variant === \"cutthroat\" ? HAND_LIMIT_CUTTHROAT : HAND_LIMIT_2PLAYER;\n\n    this.config = {\n      seed: config.seed ?? null,\n      handLimit: config.handLimit ?? defaultHandLimit,\n      variant,\n    };\n\n    this.rng = new SeededRandom(this.config.seed ?? undefined);\n    this.state = this.createInitialState();\n  }\n\n  get variant(): CuttleVariant {\n    return this.config.variant;\n  }\n\n  reset(seed?: number): void {\n    if (seed !== undefined) {\n      this.rng = new SeededRandom(seed);\n    } else if (this.config.seed !== null) {\n      this.rng = new SeededRandom(this.config.seed);\n    } else {\n      this.rng = new SeededRandom();\n    }\n    this.state = this.createInitialState();\n  }\n\n  private createInitialState(): CuttleGameState {\n    // Create and shuffle deck\n    const deck: Card[] = [];\n    let id = 0;\n    for (const suit of SUITS) {\n      for (const rank of RANKS) {\n        deck.push({ rank, suit, id: id++ });\n      }\n    }\n\n    // Add Jokers for Cutthroat variant (54-card deck)\n    if (this.config.variant === \"cutthroat\") {\n      // Use hearts suit for Jokers (arbitrary, they work on any royal)\n      deck.push({ rank: \"A\", suit: \"hearts\", id: id++, isJoker: true });\n      deck.push({ rank: \"A\", suit: \"spades\", id: id++, isJoker: true });\n    }\n\n    const shuffledDeck = this.rng.shuffle(deck);\n\n    // Setup players based on variant\n    const numPlayers = this.config.variant === \"cutthroat\" ? 3 : 2;\n    const players: PlayerState[] = [];\n    for (let i = 0; i < numPlayers; i++) {\n      players.push({ hand: [], pointCards: [], permanents: [] });\n    }\n\n    if (this.config.variant === \"cutthroat\") {\n      // Cutthroat: Each player gets 5 cards, player left of dealer goes first\n      // Player 0 is dealer, Player 1 goes first\n      for (let i = 0; i < 5; i++) {\n        for (let p = 0; p < 3; p++) {\n          players[p].hand.push(shuffledDeck.pop()!);\n        }\n      }\n    } else {\n      // 2-player: dealer (player 0) gets 6, opponent (player 1) gets 5\n      // Deal 5 to player 1 (opponent, goes first)\n      for (let i = 0; i < 5; i++) {\n        players[1].hand.push(shuffledDeck.pop()!);\n      }\n      // Deal 6 to player 0 (dealer)\n      for (let i = 0; i < 6; i++) {\n        players[0].hand.push(shuffledDeck.pop()!);\n      }\n    }\n\n    return {\n      players,\n      deck: shuffledDeck,\n      scrap: [],\n      currentPlayer: 1, // Non-dealer goes first (Player left of dealer in Cutthroat)\n      phase: \"play\",\n      pendingOneOff: null,\n      sevenDrawnCard: null,\n      sevenRevealedCards: null,\n      fiveDiscardPending: false,\n      frozenCardIds: [],\n      discardCount: 0,\n      discardingPlayer: null,\n      skipTurnPlayers: [],\n      consecutivePasses: 0,\n      winner: null,\n      isDraw: false,\n      lastAction: null,\n      turnNumber: 0,\n    };\n  }\n\n  getState(): CuttleGameState {\n    return JSON.parse(JSON.stringify(this.state));\n  }\n\n  /**\n   * Get the point goal for a player (affected by Kings)\n   */\n  getPointGoal(playerIndex: number): number {\n    const kingCount = this.state.players[playerIndex].permanents.filter(\n      (p) => p.type === \"king\"\n    ).length;\n    const baseGoal = this.config.variant === \"cutthroat\" ? BASE_GOAL_CUTTHROAT : BASE_GOAL;\n    if (kingCount === 0) return baseGoal;\n\n    let kingGoals: number[];\n    if (this.config.variant === \"cutthroat\") {\n      kingGoals = KING_GOALS_CUTTHROAT;\n    } else if (this.config.variant === \"standard\") {\n      kingGoals = KING_GOALS_STANDARD;\n    } else {\n      kingGoals = KING_GOALS_CLASSIC;\n    }\n    return kingGoals[Math.min(kingCount - 1, kingGoals.length - 1)];\n  }\n\n  /**\n   * Get total points for a player\n   */\n  getPoints(playerIndex: number): number {\n    let points = 0;\n\n    // Count all point cards this player controls\n    for (const player of this.state.players) {\n      for (const pc of player.pointCards) {\n        if (pc.controller === playerIndex) {\n          points += getPointValue(pc.card.rank);\n        }\n      }\n    }\n\n    return points;\n  }\n\n  /**\n   * Check if a player's cards are protected by a Queen\n   */\n  private isProtected(playerIndex: number, cardId: number): boolean {\n    const player = this.state.players[playerIndex];\n    const queens = player.permanents.filter((p) => p.type === \"queen\");\n\n    if (queens.length === 0) return false;\n\n    // Queens protect everything except themselves (but 2+ queens protect each other)\n    const isQueen = queens.some((q) => q.card.id === cardId);\n    if (isQueen && queens.length === 1) return false;\n\n    return true;\n  }\n\n  /**\n   * Get observation for a player\n   */\n  getObservation(playerIndex: number) {\n    const player = this.state.players[playerIndex];\n    const numPlayers = this.state.players.length;\n\n    // Check if we have glasses 8 - we see opponents' hands\n    // In Cutthroat: 8 reveals ALL opponents' hands\n    const weHaveGlasses = player.permanents.some((p) => p.type === \"eight\");\n\n    // Build opponent info for each opponent\n    const opponents: Array<{\n      playerIndex: number;\n      handSize: number;\n      hand: Card[] | null;\n      pointCards: PointCard[];\n      permanents: Permanent[];\n      points: number;\n      goal: number;\n    }> = [];\n\n    for (let i = 0; i < numPlayers; i++) {\n      if (i === playerIndex) continue;\n      const opp = this.state.players[i];\n      opponents.push({\n        playerIndex: i,\n        handSize: opp.hand.length,\n        hand: weHaveGlasses ? opp.hand : null,\n        pointCards: opp.pointCards,\n        permanents: opp.permanents,\n        points: this.getPoints(i),\n        goal: this.getPointGoal(i),\n      });\n    }\n\n    // For backwards compatibility with 2-player, also include direct opponent fields\n    const mainOpponentIndex = numPlayers === 2 ? 1 - playerIndex : (playerIndex + 1) % numPlayers;\n    const mainOpponent = this.state.players[mainOpponentIndex];\n\n    return {\n      myHand: player.hand,\n      myPointCards: player.pointCards,\n      myPermanents: player.permanents,\n      myPoints: this.getPoints(playerIndex),\n      myGoal: this.getPointGoal(playerIndex),\n\n      // Array of all opponents (for 3+ player games)\n      opponents,\n\n      // Legacy 2-player fields (main opponent for backwards compatibility)\n      opponentHandSize: mainOpponent.hand.length,\n      opponentHand: weHaveGlasses ? mainOpponent.hand : null,\n      opponentPointCards: mainOpponent.pointCards,\n      opponentPermanents: mainOpponent.permanents,\n      opponentPoints: this.getPoints(mainOpponentIndex),\n      opponentGoal: this.getPointGoal(mainOpponentIndex),\n\n      deckSize: this.state.deck.length,\n      scrap: this.state.scrap,\n      currentPlayer: this.state.currentPlayer,\n      phase: this.state.phase,\n      pendingOneOff: this.state.pendingOneOff,\n      sevenDrawnCard:\n        this.state.phase === \"resolve_seven\" && this.state.currentPlayer === playerIndex\n          ? this.state.sevenDrawnCard\n          : null,\n      sevenRevealedCards:\n        this.state.phase === \"resolve_seven_choose\" && this.state.currentPlayer === playerIndex\n          ? this.state.sevenRevealedCards\n          : null,\n      fiveDiscardPending: this.state.fiveDiscardPending,\n      frozenCardIds: this.state.frozenCardIds,\n      discardCount: this.state.discardCount,\n      discardingPlayer: this.state.discardingPlayer,\n      skipTurnPlayers: this.state.skipTurnPlayers,\n      consecutivePasses: this.state.consecutivePasses,\n      winner: this.state.winner,\n      isDraw: this.state.isDraw,\n      lastAction: this.state.lastAction,\n      variant: this.config.variant,\n      numPlayers,\n    };\n  }\n\n  get numPlayers(): number {\n    return this.config.variant === \"cutthroat\" ? 3 : 2;\n  }\n\n  /**\n   * Check if a card is frozen (can't be played this turn) - standard/cutthroat only\n   */\n  private isCardFrozen(cardId: number): boolean {\n    if (this.config.variant === \"classic\") return false;\n    return this.state.frozenCardIds.includes(cardId);\n  }\n\n  /**\n   * Get adjacent players for a given player (Cutthroat mode)\n   * In a 3-player game seated in a circle: 0 -> 1 -> 2 -> 0\n   * Player 0's neighbors are 1 and 2\n   * Player 1's neighbors are 0 and 2\n   * Player 2's neighbors are 0 and 1\n   */\n  private getAdjacentPlayers(playerIndex: number): number[] {\n    const numPlayers = this.state.players.length;\n    if (numPlayers === 2) return [1 - playerIndex];\n    if (numPlayers === 3) {\n      // All other players are adjacent in 3-player\n      return [0, 1, 2].filter((i) => i !== playerIndex);\n    }\n    // For 4 players (future): left and right only\n    return [(playerIndex + 1) % numPlayers, (playerIndex + numPlayers - 1) % numPlayers];\n  }\n\n  /**\n   * Check if a card is a Joker\n   */\n  private isJoker(card: Card): boolean {\n    return card.isJoker === true;\n  }\n\n  /**\n   * Get all targetable royals for Joker (8, Q, K, or attached Jacks from opponents)\n   */\n  private getJokerTargets(playerIndex: number): Array<{ card: Card; owner: number; type: \"permanent\" | \"jack\" }> {\n    const targets: Array<{ card: Card; owner: number; type: \"permanent\" | \"jack\" }> = [];\n\n    for (let i = 0; i < this.state.players.length; i++) {\n      if (i === playerIndex) continue; // Can't steal from self\n\n      const player = this.state.players[i];\n\n      // Target Q, K permanents (royals only - 8 is not a royal)\n      for (const perm of player.permanents) {\n        if (perm.type === \"queen\" || perm.type === \"king\") {\n          if (!this.isProtected(i, perm.card.id)) {\n            targets.push({ card: perm.card, owner: i, type: \"permanent\" });\n          }\n        }\n      }\n\n    }\n\n    // Target attached Jacks from ALL players' pointCards\n    // (Jacks that stole from you are attached to cards in your pointCards array)\n    for (const player of this.state.players) {\n      for (const pc of player.pointCards) {\n        for (const jack of pc.attachedJacks) {\n          const jackController = this.getJackController(pc, jack);\n          if (jackController !== playerIndex && !this.isProtected(jackController, jack.id)) {\n            targets.push({ card: jack, owner: jackController, type: \"jack\" });\n          }\n        }\n      }\n    }\n\n    return targets;\n  }\n\n  /**\n   * Get all point cards that can be targeted (not protected by queen)\n   */\n  private getTargetablePointCards(targetPlayer: number): PointCard[] {\n    const result: PointCard[] = [];\n    for (const player of this.state.players) {\n      for (const pc of player.pointCards) {\n        if (pc.controller === targetPlayer) {\n          if (!this.isProtected(targetPlayer, pc.card.id)) {\n            result.push(pc);\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Get all permanents that can be targeted (not protected by queen)\n   */\n  private getTargetablePermanents(targetPlayer: number): Permanent[] {\n    return this.state.players[targetPlayer].permanents.filter(\n      (p) => !this.isProtected(targetPlayer, p.card.id)\n    );\n  }\n\n  /**\n   * Get valid actions for a player in current state\n   */\n  getValidActions(playerIndex: number): string[] {\n    const actions: string[] = [];\n    const player = this.state.players[playerIndex];\n    const numPlayers = this.state.players.length;\n\n    if (this.state.winner !== null || this.state.isDraw) {\n      return [];\n    }\n\n    switch (this.state.phase) {\n      case \"play\":\n        if (playerIndex !== this.state.currentPlayer) return [];\n\n        // Draw (if deck not empty and under hand limit)\n        if (this.state.deck.length > 0 && player.hand.length < this.config.handLimit) {\n          actions.push(\"draw\");\n        }\n\n        // Pass (only if deck is empty)\n        if (this.state.deck.length === 0) {\n          actions.push(\"pass\");\n        }\n\n        // Play cards from hand (excluding frozen cards)\n        for (const card of player.hand) {\n          // Skip frozen cards\n          if (this.isCardFrozen(card.id)) continue;\n\n          // Handle Joker cards (Cutthroat mode only)\n          if (this.isJoker(card)) {\n            // Joker can steal royals (8, Q, K) or Jacks from opponents\n            const jokerTargets = this.getJokerTargets(playerIndex);\n            for (const target of jokerTargets) {\n              actions.push(`joker:${card.id}:${target.card.id}`);\n            }\n            continue; // Jokers can only be used this way\n          }\n\n          // Point card (A-10)\n          if (isPointRank(card.rank)) {\n            actions.push(`point:${card.id}`);\n          }\n\n          // One-off effects\n          switch (card.rank) {\n            case \"A\":\n              // Move all point cards to scrap - only useful if there are point cards\n              if (this.getAllPointCardsInPlay().length > 0) {\n                actions.push(`oneoff:${card.id}`);\n              }\n              break;\n            case \"2\":\n              // Target a permanent\n              for (const p of this.state.players) {\n                for (const perm of p.permanents) {\n                  if (!this.isProtected(this.state.players.indexOf(p), perm.card.id)) {\n                    actions.push(`oneoff:${card.id}:permanent:${perm.card.id}`);\n                  }\n                }\n              }\n              // Also target Jacks on point cards\n              for (const p of this.state.players) {\n                for (const pc of p.pointCards) {\n                  for (const jack of pc.attachedJacks) {\n                    const jackController = this.getJackController(pc, jack);\n                    if (!this.isProtected(jackController, jack.id)) {\n                      actions.push(`oneoff:${card.id}:permanent:${jack.id}`);\n                    }\n                  }\n                }\n              }\n              break;\n            case \"3\":\n              // Retrieve from scrap (only if scrap not empty)\n              if (this.state.scrap.length > 0) {\n                actions.push(`oneoff:${card.id}`);\n              }\n              break;\n            case \"4\":\n              // Opponent discards 2 - in 3+ players, must target specific opponent\n              if (numPlayers === 2) {\n                const opponent = this.state.players[1 - playerIndex];\n                if (opponent.hand.length > 0) {\n                  actions.push(`oneoff:${card.id}`);\n                }\n              } else {\n                // Target each opponent who has cards\n                for (let i = 0; i < numPlayers; i++) {\n                  if (i !== playerIndex && this.state.players[i].hand.length > 0) {\n                    actions.push(`oneoff:${card.id}:target:${i}`);\n                  }\n                }\n              }\n              break;\n            case \"5\":\n              // Draw 2 (only if deck has cards)\n              if (this.state.deck.length > 0) {\n                actions.push(`oneoff:${card.id}`);\n              }\n              break;\n            case \"6\":\n              // Move all permanents to scrap\n              if (this.getAllPermanentsInPlay().length > 0) {\n                actions.push(`oneoff:${card.id}`);\n              }\n              break;\n            case \"7\":\n              // Draw and play (only if deck not empty)\n              if (this.state.deck.length > 0) {\n                actions.push(`oneoff:${card.id}`);\n              }\n              break;\n            case \"9\":\n              // Return a card to controller's hand\n              // In cutthroat: target also skips their next turn\n              // In standard variant: only targets permanents (8, Q, K, J)\n              // In classic variant: can target any card on the board\n              for (const p of this.state.players) {\n                const pIdx = this.state.players.indexOf(p);\n                for (const perm of p.permanents) {\n                  if (!this.isProtected(pIdx, perm.card.id)) {\n                    actions.push(`oneoff:${card.id}:card:${perm.card.id}`);\n                  }\n                }\n                // Jacks (always targetable as they're permanents)\n                for (const pc of p.pointCards) {\n                  for (const jack of pc.attachedJacks) {\n                    const jackController = this.getJackController(pc, jack);\n                    if (!this.isProtected(jackController, jack.id)) {\n                      actions.push(`oneoff:${card.id}:card:${jack.id}`);\n                    }\n                  }\n                  // Point cards only targetable in classic variant (not standard or cutthroat)\n                  if (this.config.variant === \"classic\") {\n                    if (!this.isProtected(pc.controller, pc.card.id)) {\n                      actions.push(`oneoff:${card.id}:card:${pc.card.id}`);\n                    }\n                  }\n                }\n              }\n              break;\n          }\n\n          // Permanent effects\n          switch (card.rank) {\n            case \"8\":\n              actions.push(`permanent:${card.id}`);\n              break;\n            case \"J\":\n              // Target point cards - in cutthroat, can only target adjacent players\n              if (this.config.variant === \"cutthroat\") {\n                const adjacentPlayers = this.getAdjacentPlayers(playerIndex);\n                for (const adjPlayer of adjacentPlayers) {\n                  for (const pc of this.getTargetablePointCards(adjPlayer)) {\n                    actions.push(`permanent:${card.id}:${pc.card.id}`);\n                  }\n                }\n                // Can also target your own point cards controlled by adjacent opponent\n                for (const pc of player.pointCards) {\n                  if (pc.controller !== playerIndex && adjacentPlayers.includes(pc.controller)) {\n                    if (!this.isProtected(pc.controller, pc.card.id)) {\n                      actions.push(`permanent:${card.id}:${pc.card.id}`);\n                    }\n                  }\n                }\n              } else {\n                // 2-player: target opponent's point cards\n                for (const pc of this.getTargetablePointCards(1 - playerIndex)) {\n                  actions.push(`permanent:${card.id}:${pc.card.id}`);\n                }\n                // Can also target your own point cards controlled by opponent\n                for (const pc of player.pointCards) {\n                  if (pc.controller !== playerIndex && !this.isProtected(pc.controller, pc.card.id)) {\n                    actions.push(`permanent:${card.id}:${pc.card.id}`);\n                  }\n                }\n              }\n              break;\n            case \"Q\":\n            case \"K\":\n              actions.push(`permanent:${card.id}`);\n              break;\n          }\n\n          // Scuttle (point cards A-10 can scuttle opponents' lower point cards)\n          if (isPointRank(card.rank)) {\n            // Check all opponents' point cards\n            for (let oppIdx = 0; oppIdx < numPlayers; oppIdx++) {\n              if (oppIdx === playerIndex) continue;\n              const oppPlayer = this.state.players[oppIdx];\n              for (const pc of oppPlayer.pointCards) {\n                if (pc.controller === oppIdx && canScuttle(card, pc.card)) {\n                  actions.push(`scuttle:${card.id}:${pc.card.id}`);\n                }\n              }\n            }\n            // Also check point cards we played that any opponent controls\n            for (const pc of player.pointCards) {\n              if (pc.controller !== playerIndex && canScuttle(card, pc.card)) {\n                actions.push(`scuttle:${card.id}:${pc.card.id}`);\n              }\n            }\n          }\n        }\n        break;\n\n      case \"counter\":\n        if (!this.state.pendingOneOff) return [];\n\n        // Determine who can counter based on chain length\n        // Even chain length: target's turn to counter\n        // Odd chain length: original player can counter the counter\n        const oneOffPlayer = this.state.pendingOneOff.player;\n        let counteringPlayer: number;\n\n        if (this.state.pendingOneOff.counterChain.length % 2 === 0) {\n          // Determine who should counter first based on one-off type\n          if (this.state.pendingOneOff.targetPlayer !== undefined) {\n            // Player-targeted one-off (4): targeted player counters\n            counteringPlayer = this.state.pendingOneOff.targetPlayer;\n          } else if (this.state.pendingOneOff.target) {\n            // Card-targeted one-off (2, 9): find owner of targeted card\n            counteringPlayer = this.findCardOwner(this.state.pendingOneOff.target.cardId);\n            if (counteringPlayer === -1) {\n              // Fallback to next player if card not found\n              counteringPlayer = (oneOffPlayer + 1) % numPlayers;\n            }\n          } else {\n            // Untargeted one-off (A, 3, 5, 6, 7): next player in rotation\n            if (numPlayers === 2) {\n              counteringPlayer = 1 - oneOffPlayer;\n            } else {\n              counteringPlayer = (oneOffPlayer + 1) % numPlayers;\n            }\n          }\n        } else {\n          // Odd chain: original player can counter the counter\n          counteringPlayer = oneOffPlayer;\n        }\n\n        if (playerIndex !== counteringPlayer) return [];\n\n        // Can counter with a 2\n        for (const card of player.hand) {\n          if (card.rank === \"2\") {\n            actions.push(`counter:${card.id}`);\n          }\n        }\n        // Can pass (allow the effect)\n        actions.push(\"pass\");\n        break;\n\n      case \"resolve_three\":\n        if (playerIndex !== this.state.currentPlayer) return [];\n        // Choose a card from scrap\n        for (const card of this.state.scrap) {\n          actions.push(`choose:${card.id}`);\n        }\n        break;\n\n      case \"resolve_four\":\n        // Opponent must discard - use discardingPlayer for 3+ player games\n        const discardingPlayer = this.state.discardingPlayer ?? (1 - this.state.currentPlayer);\n        if (playerIndex !== discardingPlayer) return [];\n        for (const card of player.hand) {\n          actions.push(`discard:${card.id}`);\n        }\n        break;\n\n      case \"resolve_five_discard\":\n        // Standard variant: must discard a card before drawing 3\n        if (playerIndex !== this.state.currentPlayer) return [];\n        for (const card of player.hand) {\n          actions.push(`five_discard:${card.id}`);\n        }\n        break;\n\n      case \"resolve_seven\":\n        // Classic variant: must play the single drawn card\n        if (playerIndex !== this.state.currentPlayer) return [];\n        if (!this.state.sevenDrawnCard) return [];\n\n        const drawnCard = this.state.sevenDrawnCard;\n        const sevenActions = this.getSevenPlayActions(playerIndex, drawnCard);\n\n        if (sevenActions.length === 0) {\n          // Can't play - must scrap\n          actions.push(\"scrap_seven\");\n        } else {\n          actions.push(...sevenActions);\n        }\n        break;\n\n      case \"resolve_seven_choose\":\n        // Standard variant: choose one of two revealed cards\n        if (playerIndex !== this.state.currentPlayer) return [];\n        if (!this.state.sevenRevealedCards || this.state.sevenRevealedCards.length === 0) return [];\n\n        for (const card of this.state.sevenRevealedCards) {\n          const cardActions = this.getSevenPlayActions(playerIndex, card);\n          if (cardActions.length > 0) {\n            actions.push(...cardActions);\n          }\n        }\n        // If no valid plays for either card, can scrap one\n        if (actions.length === 0 && this.state.sevenRevealedCards.length > 0) {\n          for (const card of this.state.sevenRevealedCards) {\n            actions.push(`scrap_seven:${card.id}`);\n          }\n        }\n        break;\n\n      case \"resolve_nine\":\n        // This should be handled during the one-off, not as a separate phase\n        break;\n    }\n\n    return actions;\n  }\n\n  /**\n   * Get valid actions for playing the 7's drawn card\n   */\n  private getSevenPlayActions(playerIndex: number, card: Card): string[] {\n    const actions: string[] = [];\n    const opponent = this.state.players[1 - playerIndex];\n\n    // Jokers can only steal royals (handled separately in Cutthroat)\n    if (this.isJoker(card)) {\n      const jokerTargets = this.getJokerTargets(playerIndex);\n      for (const target of jokerTargets) {\n        actions.push(`seven_joker:${card.id}:${target.card.id}`);\n      }\n      return actions; // Jokers can only be used this way\n    }\n\n    // Point card\n    if (isPointRank(card.rank)) {\n      actions.push(`seven_point:${card.id}`);\n    }\n\n    // One-off effects\n    switch (card.rank) {\n      case \"A\":\n        if (this.getAllPointCardsInPlay().length > 0) {\n          actions.push(`seven_oneoff:${card.id}`);\n        }\n        break;\n      case \"2\":\n        for (const p of this.state.players) {\n          for (const perm of p.permanents) {\n            if (!this.isProtected(this.state.players.indexOf(p), perm.card.id)) {\n              actions.push(`seven_oneoff:${card.id}:permanent:${perm.card.id}`);\n            }\n          }\n        }\n        for (const p of this.state.players) {\n          for (const pc of p.pointCards) {\n            for (const jack of pc.attachedJacks) {\n              const jackController = this.getJackController(pc, jack);\n              if (!this.isProtected(jackController, jack.id)) {\n                actions.push(`seven_oneoff:${card.id}:permanent:${jack.id}`);\n              }\n            }\n          }\n        }\n        break;\n      case \"3\":\n        if (this.state.scrap.length > 0) {\n          actions.push(`seven_oneoff:${card.id}`);\n        }\n        break;\n      case \"4\":\n        if (opponent.hand.length > 0) {\n          actions.push(`seven_oneoff:${card.id}`);\n        }\n        break;\n      case \"5\":\n        if (this.state.deck.length > 0) {\n          actions.push(`seven_oneoff:${card.id}`);\n        }\n        break;\n      case \"6\":\n        if (this.getAllPermanentsInPlay().length > 0) {\n          actions.push(`seven_oneoff:${card.id}`);\n        }\n        break;\n      case \"7\":\n        if (this.state.deck.length > 0) {\n          actions.push(`seven_oneoff:${card.id}`);\n        }\n        break;\n      case \"9\":\n        // In standard variant: only targets permanents\n        // In classic variant: can target any card on the board\n        for (const p of this.state.players) {\n          const pIdx = this.state.players.indexOf(p);\n          for (const perm of p.permanents) {\n            if (!this.isProtected(pIdx, perm.card.id)) {\n              actions.push(`seven_oneoff:${card.id}:card:${perm.card.id}`);\n            }\n          }\n          for (const pc of p.pointCards) {\n            // Jacks are always targetable as permanents\n            for (const jack of pc.attachedJacks) {\n              const jackController = this.getJackController(pc, jack);\n              if (!this.isProtected(jackController, jack.id)) {\n                actions.push(`seven_oneoff:${card.id}:card:${jack.id}`);\n              }\n            }\n            // Point cards only targetable in classic variant\n            if (this.config.variant !== \"standard\") {\n              if (!this.isProtected(pc.controller, pc.card.id)) {\n                actions.push(`seven_oneoff:${card.id}:card:${pc.card.id}`);\n              }\n            }\n          }\n        }\n        break;\n    }\n\n    // Permanents\n    switch (card.rank) {\n      case \"8\":\n      case \"Q\":\n      case \"K\":\n        actions.push(`seven_permanent:${card.id}`);\n        break;\n      case \"J\":\n        // Must target a point card - even your own if that's all available!\n        for (const p of this.state.players) {\n          for (const pc of p.pointCards) {\n            if (!this.isProtected(pc.controller, pc.card.id)) {\n              actions.push(`seven_permanent:${card.id}:${pc.card.id}`);\n            }\n          }\n        }\n        break;\n    }\n\n    // Scuttle\n    if (isPointRank(card.rank)) {\n      for (const p of this.state.players) {\n        for (const pc of p.pointCards) {\n          if (pc.controller === 1 - playerIndex && canScuttle(card, pc.card)) {\n            actions.push(`seven_scuttle:${card.id}:${pc.card.id}`);\n          }\n        }\n      }\n    }\n\n    return actions;\n  }\n\n  private getAllPointCardsInPlay(): PointCard[] {\n    const result: PointCard[] = [];\n    for (const player of this.state.players) {\n      result.push(...player.pointCards);\n    }\n    return result;\n  }\n\n  private getAllPermanentsInPlay(): Permanent[] {\n    const result: Permanent[] = [];\n    for (const player of this.state.players) {\n      result.push(...player.permanents);\n    }\n    // Also include Jacks attached to point cards (they count as permanents for 6)\n    for (const player of this.state.players) {\n      for (const pc of player.pointCards) {\n        for (const jack of pc.attachedJacks) {\n          result.push({ card: jack, type: \"joker\" }); // Type doesn't matter, just need to count it\n        }\n      }\n    }\n    return result;\n  }\n\n  private getJackController(pointCard: PointCard, jack: Card): number {\n    // Find which player originally played this jack\n    const jackIndex = pointCard.attachedJacks.indexOf(jack);\n    // Control alternates with each jack\n    const originalOwner = this.findCardOriginalOwner(pointCard.card.id);\n    return (originalOwner + jackIndex + 1) % 2;\n  }\n\n  private findCardOriginalOwner(cardId: number): number {\n    for (let i = 0; i < this.state.players.length; i++) {\n      if (this.state.players[i].pointCards.some((pc) => pc.card.id === cardId)) {\n        return i;\n      }\n    }\n    return 0;\n  }\n\n  /**\n   * Execute an action\n   */\n  action(playerIndex: number, actionStr: string): { success: boolean; message: string } {\n    const valid = this.getValidActions(playerIndex);\n    if (!valid.includes(actionStr)) {\n      return { success: false, message: `Invalid action: ${actionStr}` };\n    }\n\n    const parts = actionStr.split(\":\");\n    const actionType = parts[0];\n    let message = \"\";\n\n    this.state.consecutivePasses = actionType === \"pass\" ? this.state.consecutivePasses + 1 : 0;\n\n    switch (this.state.phase) {\n      case \"play\":\n        message = this.handlePlayPhase(playerIndex, actionType, parts);\n        break;\n      case \"counter\":\n        message = this.handleCounterPhase(playerIndex, actionType, parts);\n        break;\n      case \"resolve_three\":\n        message = this.handleResolveThree(playerIndex, parts);\n        break;\n      case \"resolve_four\":\n        message = this.handleResolveFour(playerIndex, parts);\n        break;\n      case \"resolve_five_discard\":\n        message = this.handleResolveFiveDiscard(playerIndex, parts);\n        break;\n      case \"resolve_seven\":\n        message = this.handleResolveSeven(playerIndex, actionType, parts);\n        break;\n      case \"resolve_seven_choose\":\n        message = this.handleResolveSevenChoose(playerIndex, actionType, parts);\n        break;\n    }\n\n    this.state.lastAction = message;\n    this.checkGameEnd();\n    return { success: true, message };\n  }\n\n  private handlePlayPhase(player: number, action: string, parts: string[]): string {\n    switch (action) {\n      case \"draw\":\n        const drawnCard = this.state.deck.pop()!;\n        this.state.players[player].hand.push(drawnCard);\n        this.advanceTurn();\n        return `Player ${player} draws a card`;\n\n      case \"pass\":\n        if (this.state.consecutivePasses >= 3) {\n          this.state.isDraw = true;\n          this.state.phase = \"complete\";\n          return \"Game ends in a draw (3 consecutive passes)\";\n        }\n        this.advanceTurn();\n        return `Player ${player} passes`;\n\n      case \"point\": {\n        const cardId = parseInt(parts[1]);\n        const card = this.removeCardFromHand(player, cardId)!;\n        this.state.players[player].pointCards.push({\n          card,\n          attachedJacks: [],\n          controller: player,\n        });\n        this.advanceTurn();\n        return `Player ${player} plays ${cardToString(card)} for ${getPointValue(card.rank)} points`;\n      }\n\n      case \"oneoff\": {\n        const cardId = parseInt(parts[1]);\n        const card = this.removeCardFromHand(player, cardId)!;\n\n        // Parse target for cards like 2 (permanent) or 9 (card)\n        let target: { cardId: number; type: \"permanent\" | \"pointCard\" } | undefined;\n        let targetPlayer: number | undefined;\n\n        if (parts.length > 3 && parts[2] !== \"target\") {\n          target = { cardId: parseInt(parts[3]), type: parts[2] as \"permanent\" | \"pointCard\" };\n        }\n\n        // Parse target player for 4 one-off in 3+ player games\n        if (parts.length > 2 && parts[2] === \"target\") {\n          targetPlayer = parseInt(parts[3]);\n        }\n\n        this.state.pendingOneOff = {\n          card,\n          player,\n          target,\n          targetPlayer,\n          counterChain: [],\n        };\n        this.state.phase = \"counter\";\n        return `Player ${player} plays ${cardToString(card)} as one-off`;\n      }\n\n      case \"permanent\": {\n        const cardId = parseInt(parts[1]);\n        const card = this.removeCardFromHand(player, cardId)!;\n\n        if (card.rank === \"J\") {\n          // Jack targets a point card\n          const targetId = parseInt(parts[2]);\n          const targetPc = this.findPointCard(targetId);\n          if (targetPc) {\n            targetPc.attachedJacks.push(card);\n            // Switch control\n            targetPc.controller = player;\n          }\n          this.advanceTurn();\n          return `Player ${player} plays ${cardToString(card)} on point card`;\n        } else {\n          const type = card.rank === \"8\" ? \"eight\" : card.rank === \"Q\" ? \"queen\" : \"king\";\n          this.state.players[player].permanents.push({ card, type });\n          this.advanceTurn();\n          return `Player ${player} plays ${cardToString(card)} as permanent`;\n        }\n      }\n\n      case \"scuttle\": {\n        const attackerId = parseInt(parts[1]);\n        const targetId = parseInt(parts[2]);\n        const attackerCard = this.removeCardFromHand(player, attackerId)!;\n        const targetPc = this.findPointCard(targetId);\n\n        if (targetPc) {\n          // Remove point card and any attached jacks\n          this.removePointCard(targetId);\n          this.state.scrap.push(attackerCard, targetPc.card, ...targetPc.attachedJacks);\n        }\n        this.advanceTurn();\n        return `Player ${player} scuttles with ${cardToString(attackerCard)}`;\n      }\n\n      case \"joker\": {\n        // Joker steals a royal (8, Q, K) or Jack from an opponent (Cutthroat mode)\n        const jokerId = parseInt(parts[1]);\n        const targetCardId = parseInt(parts[2]);\n        const jokerCard = this.removeCardFromHand(player, jokerId)!;\n\n        // Find and steal the target royal/jack\n        for (let i = 0; i < this.state.players.length; i++) {\n          if (i === player) continue;\n\n          // Check permanents (8, Q, K)\n          const permIndex = this.state.players[i].permanents.findIndex(\n            (p) => p.card.id === targetCardId\n          );\n          if (permIndex >= 0) {\n            const stolenPerm = this.state.players[i].permanents.splice(permIndex, 1)[0];\n            // Add to current player's permanents as a joker-stolen permanent\n            this.state.players[player].permanents.push({\n              card: stolenPerm.card,\n              type: stolenPerm.type,\n              stolenFromPlayer: i,\n            });\n            // Joker goes to scrap after use\n            this.state.scrap.push(jokerCard);\n            this.advanceTurn();\n            return `Player ${player} uses Joker to steal ${cardToString(stolenPerm.card)} from Player ${i}`;\n          }\n\n          // Check Jacks on point cards\n          for (const pc of this.state.players[i].pointCards) {\n            const jackIndex = pc.attachedJacks.findIndex((j) => j.id === targetCardId);\n            if (jackIndex >= 0) {\n              const stolenJack = pc.attachedJacks.splice(jackIndex, 1)[0];\n              // Add the jack to current player's hand (they can replay it)\n              this.state.players[player].hand.push(stolenJack);\n              // Update point card controller\n              const originalOwner = i;\n              pc.controller = pc.attachedJacks.length % 2 === 0 ? originalOwner : 1 - originalOwner;\n              // Joker goes to scrap after use\n              this.state.scrap.push(jokerCard);\n              this.advanceTurn();\n              return `Player ${player} uses Joker to steal ${cardToString(stolenJack)} from Player ${i}`;\n            }\n          }\n        }\n        this.advanceTurn();\n        return `Player ${player} plays Joker (no valid target found)`;\n      }\n\n      default:\n        return \"Unknown action\";\n    }\n  }\n\n  private handleCounterPhase(player: number, action: string, parts: string[]): string {\n    if (!this.state.pendingOneOff) return \"No pending one-off\";\n\n    if (action === \"pass\") {\n      // Effect resolves (or counter succeeds)\n      if (this.state.pendingOneOff.counterChain.length % 2 === 0) {\n        // Original effect resolves\n        return this.resolveOneOff();\n      } else {\n        // Counter succeeds, original effect is cancelled\n        this.state.scrap.push(\n          this.state.pendingOneOff.card,\n          ...this.state.pendingOneOff.counterChain\n        );\n        this.state.pendingOneOff = null;\n        this.state.phase = \"play\";\n        this.advanceTurn();\n        return \"One-off was countered\";\n      }\n    }\n\n    if (action === \"counter\") {\n      const cardId = parseInt(parts[1]);\n      const card = this.removeCardFromHand(player, cardId)!;\n      this.state.pendingOneOff.counterChain.push(card);\n      // Stay in counter phase, other player can counter the counter\n      return `Player ${player} counters with ${cardToString(card)}`;\n    }\n\n    return \"Unknown counter action\";\n  }\n\n  private resolveOneOff(): string {\n    const pending = this.state.pendingOneOff!;\n    const player = pending.player;\n    const card = pending.card;\n\n    // Move all cards to scrap\n    this.state.scrap.push(card, ...pending.counterChain);\n\n    let message = \"\";\n\n    switch (card.rank) {\n      case \"A\":\n        // Move all point cards to scrap\n        for (const p of this.state.players) {\n          for (const pc of p.pointCards) {\n            this.state.scrap.push(pc.card, ...pc.attachedJacks);\n          }\n          p.pointCards = [];\n        }\n        message = \"All point cards moved to scrap\";\n        this.state.phase = \"play\";\n        this.advanceTurn();\n        break;\n\n      case \"2\":\n        // Destroy target permanent\n        if (pending.target) {\n          this.removePermanent(pending.target.cardId);\n        }\n        message = \"Permanent destroyed\";\n        this.state.phase = \"play\";\n        this.advanceTurn();\n        break;\n\n      case \"3\":\n        // Enter resolve_three phase to choose card from scrap\n        this.state.phase = \"resolve_three\";\n        message = \"Choose a card from scrap\";\n        break;\n\n      case \"4\": {\n        // Opponent must discard 2 cards\n        // In 3+ player games, use targetPlayer from pending one-off\n        const targetOpponentIndex =\n          pending.targetPlayer !== undefined ? pending.targetPlayer : 1 - player;\n        const targetOpponent = this.state.players[targetOpponentIndex];\n        this.state.discardCount = Math.min(2, targetOpponent.hand.length);\n        this.state.discardingPlayer = targetOpponentIndex;\n        if (this.state.discardCount > 0) {\n          this.state.phase = \"resolve_four\";\n          message = `Player ${targetOpponentIndex} must discard ${this.state.discardCount} cards`;\n        } else {\n          this.state.phase = \"play\";\n          this.state.discardingPlayer = null;\n          this.advanceTurn();\n          message = `Player ${targetOpponentIndex} has no cards to discard`;\n        }\n        break;\n      }\n\n      case \"5\":\n        if (this.config.variant !== \"classic\") {\n          // Standard/Cutthroat: Discard 1, then draw 3 (skip discard if hand empty after playing 5)\n          const playerHand = this.state.players[player].hand;\n          if (playerHand.length === 0) {\n            // No cards to discard, just draw 3\n            const toDraw = Math.min(3, this.state.deck.length);\n            for (let i = 0; i < toDraw; i++) {\n              this.state.players[player].hand.push(this.state.deck.pop()!);\n            }\n            message = `Player ${player} draws ${toDraw} cards`;\n            this.state.phase = \"play\";\n            this.advanceTurn();\n          } else {\n            // Must discard first\n            this.state.fiveDiscardPending = true;\n            this.state.phase = \"resolve_five_discard\";\n            message = `Player ${player} must discard a card, then draws 3`;\n          }\n        } else {\n          // Classic: Draw 2 cards\n          const toDraw = Math.min(2, this.state.deck.length);\n          for (let i = 0; i < toDraw; i++) {\n            this.state.players[player].hand.push(this.state.deck.pop()!);\n          }\n          message = `Player ${player} draws ${toDraw} cards`;\n          this.state.phase = \"play\";\n          this.advanceTurn();\n        }\n        break;\n\n      case \"6\":\n        // Move all permanents to scrap\n        for (const p of this.state.players) {\n          for (const perm of p.permanents) {\n            this.state.scrap.push(perm.card);\n          }\n          p.permanents = [];\n          // Also remove jacks from point cards\n          for (const pc of p.pointCards) {\n            this.state.scrap.push(...pc.attachedJacks);\n            pc.attachedJacks = [];\n            // Reset controller to original owner\n            pc.controller = this.state.players.indexOf(p);\n          }\n        }\n        message = \"All permanents moved to scrap\";\n        this.state.phase = \"play\";\n        this.advanceTurn();\n        break;\n\n      case \"7\":\n        if (this.config.variant !== \"classic\") {\n          // Standard/Cutthroat: Reveal top 2 cards, choose 1 to play, put other back\n          if (this.state.deck.length >= 2) {\n            const card1 = this.state.deck.pop()!;\n            const card2 = this.state.deck.pop()!;\n            this.state.sevenRevealedCards = [card1, card2];\n            this.state.phase = \"resolve_seven_choose\";\n            message = `Player ${player} reveals ${cardToString(card1)} and ${cardToString(card2)} - choose one to play`;\n          } else if (this.state.deck.length === 1) {\n            // Only 1 card - must play it (like classic)\n            const drawnCard = this.state.deck.pop()!;\n            this.state.sevenDrawnCard = drawnCard;\n            this.state.phase = \"resolve_seven\";\n            message = `Player ${player} draws ${cardToString(drawnCard)} and must play it`;\n          } else {\n            this.state.phase = \"play\";\n            this.advanceTurn();\n            message = \"Deck is empty\";\n          }\n        } else {\n          // Classic: Draw a card and must play it\n          if (this.state.deck.length > 0) {\n            const drawnCard = this.state.deck.pop()!;\n            this.state.sevenDrawnCard = drawnCard;\n            this.state.phase = \"resolve_seven\";\n            message = `Player ${player} draws ${cardToString(drawnCard)} and must play it`;\n          } else {\n            this.state.phase = \"play\";\n            this.advanceTurn();\n            message = \"Deck is empty\";\n          }\n        }\n        break;\n\n      case \"9\": {\n        // Return target card to controller's hand\n        if (pending.target) {\n          const targetCardId = pending.target.cardId;\n\n          // Find the owner of the targeted card before returning it\n          let targetOwner: number | null = null;\n          for (let i = 0; i < this.state.players.length; i++) {\n            const p = this.state.players[i];\n            // Check permanents\n            if (p.permanents.some((perm) => perm.card.id === targetCardId)) {\n              targetOwner = i;\n              break;\n            }\n            // Check jacks and point cards\n            for (const pc of p.pointCards) {\n              if (pc.card.id === targetCardId || pc.attachedJacks.some((j) => j.id === targetCardId)) {\n                targetOwner = i;\n                break;\n              }\n            }\n            if (targetOwner !== null) break;\n          }\n\n          this.returnCardToHand(targetCardId);\n\n          // Standard/cutthroat: card can't be played next turn\n          if (this.config.variant !== \"classic\") {\n            this.state.frozenCardIds.push(targetCardId);\n          }\n\n          // Cutthroat: target owner skips their next turn\n          if (this.config.variant === \"cutthroat\" && targetOwner !== null && targetOwner !== player) {\n            if (!this.state.skipTurnPlayers.includes(targetOwner)) {\n              this.state.skipTurnPlayers.push(targetOwner);\n            }\n          }\n        }\n\n        if (this.config.variant === \"cutthroat\") {\n          message = \"Permanent returned to hand (frozen + owner skips next turn)\";\n        } else if (this.config.variant === \"standard\") {\n          message = \"Permanent returned to hand (frozen until next turn)\";\n        } else {\n          message = \"Card returned to hand\";\n        }\n        this.state.phase = \"play\";\n        this.advanceTurn();\n        break;\n      }\n    }\n\n    this.state.pendingOneOff = null;\n    return message;\n  }\n\n  private handleResolveThree(player: number, parts: string[]): string {\n    const cardId = parseInt(parts[1]);\n    const cardIndex = this.state.scrap.findIndex((c) => c.id === cardId);\n    if (cardIndex >= 0) {\n      const card = this.state.scrap.splice(cardIndex, 1)[0];\n      this.state.players[player].hand.push(card);\n    }\n    this.state.phase = \"play\";\n    this.advanceTurn();\n    return `Player ${player} retrieves card from scrap`;\n  }\n\n  private handleResolveFour(player: number, parts: string[]): string {\n    const cardId = parseInt(parts[1]);\n    const card = this.removeCardFromHand(player, cardId)!;\n    this.state.scrap.push(card);\n    this.state.discardCount--;\n\n    if (this.state.discardCount === 0 || this.state.players[player].hand.length === 0) {\n      this.state.phase = \"play\";\n      this.state.discardingPlayer = null;\n      this.advanceTurn();\n      return `Player ${player} finishes discarding`;\n    }\n    return `Player ${player} discards ${cardToString(card)}`;\n  }\n\n  private handleResolveFiveDiscard(player: number, parts: string[]): string {\n    // Standard variant: discard a card, then draw 3\n    const cardId = parseInt(parts[1]);\n    const card = this.removeCardFromHand(player, cardId)!;\n    this.state.scrap.push(card);\n\n    // Draw 3 cards (respecting hand limit in standard)\n    let drawn = 0;\n    const maxDraw = Math.min(3, this.state.deck.length);\n    for (let i = 0; i < maxDraw; i++) {\n      if (this.state.players[player].hand.length < this.config.handLimit) {\n        this.state.players[player].hand.push(this.state.deck.pop()!);\n        drawn++;\n      }\n    }\n\n    this.state.fiveDiscardPending = false;\n    this.state.phase = \"play\";\n    this.advanceTurn();\n    return `Player ${player} discards ${cardToString(card)}, draws ${drawn} cards`;\n  }\n\n  private handleResolveSeven(player: number, action: string, parts: string[]): string {\n    const card = this.state.sevenDrawnCard!;\n    this.state.sevenDrawnCard = null;\n\n    if (action === \"scrap_seven\") {\n      this.state.scrap.push(card);\n      this.state.phase = \"play\";\n      this.advanceTurn();\n      return `Card scrapped (could not be played)`;\n    }\n\n    // Parse the action similar to normal play\n    const playType = action.replace(\"seven_\", \"\");\n\n    switch (playType) {\n      case \"point\":\n        this.state.players[player].pointCards.push({\n          card,\n          attachedJacks: [],\n          controller: player,\n        });\n        break;\n\n      case \"oneoff\": {\n        const target =\n          parts.length > 3\n            ? { cardId: parseInt(parts[3]), type: parts[2] as \"permanent\" | \"pointCard\" }\n            : undefined;\n        this.state.pendingOneOff = {\n          card,\n          player,\n          target,\n          counterChain: [],\n        };\n        this.state.phase = \"counter\";\n        return `Player ${player} plays ${cardToString(card)} as one-off from 7`;\n      }\n\n      case \"permanent\": {\n        if (card.rank === \"J\") {\n          const targetId = parseInt(parts[2]);\n          const targetPc = this.findPointCard(targetId);\n          if (targetPc) {\n            targetPc.attachedJacks.push(card);\n            targetPc.controller = player;\n          }\n        } else {\n          const type = card.rank === \"8\" ? \"eight\" : card.rank === \"Q\" ? \"queen\" : \"king\";\n          this.state.players[player].permanents.push({ card, type });\n        }\n        break;\n      }\n\n      case \"scuttle\": {\n        const targetId = parseInt(parts[2]);\n        const targetPc = this.findPointCard(targetId);\n        if (targetPc) {\n          this.removePointCard(targetId);\n          this.state.scrap.push(card, targetPc.card, ...targetPc.attachedJacks);\n        }\n        break;\n      }\n\n      case \"joker\": {\n        // Joker steals a royal from an opponent (same logic as regular joker action)\n        const targetCardId = parseInt(parts[2]);\n        for (let i = 0; i < this.state.players.length; i++) {\n          if (i === player) continue;\n          // Check permanents (Q, K)\n          const permIndex = this.state.players[i].permanents.findIndex(\n            (p) => p.card.id === targetCardId\n          );\n          if (permIndex >= 0) {\n            const stolenPerm = this.state.players[i].permanents.splice(permIndex, 1)[0];\n            this.state.players[player].permanents.push({\n              card: stolenPerm.card,\n              type: stolenPerm.type,\n              stolenFromPlayer: i,\n            });\n            this.state.scrap.push(card); // Joker goes to scrap\n            this.state.phase = \"play\";\n            this.advanceTurn();\n            return `Player ${player} uses Joker from 7 to steal ${cardToString(stolenPerm.card)} from Player ${i}`;\n          }\n          // Check Jacks on point cards\n          for (const pc of this.state.players[i].pointCards) {\n            const jackIndex = pc.attachedJacks.findIndex((j) => j.id === targetCardId);\n            if (jackIndex >= 0) {\n              const stolenJack = pc.attachedJacks.splice(jackIndex, 1)[0];\n              this.state.players[player].hand.push(stolenJack);\n              const originalOwner = i;\n              pc.controller = pc.attachedJacks.length % 2 === 0 ? originalOwner : 1 - originalOwner;\n              this.state.scrap.push(card); // Joker goes to scrap\n              this.state.phase = \"play\";\n              this.advanceTurn();\n              return `Player ${player} uses Joker from 7 to steal ${cardToString(stolenJack)} from Player ${i}`;\n            }\n          }\n        }\n        // No valid target found, scrap the joker\n        this.state.scrap.push(card);\n        break;\n      }\n    }\n\n    this.state.phase = \"play\";\n    this.advanceTurn();\n    return `Player ${player} plays ${cardToString(card)} from 7`;\n  }\n\n  private handleResolveSevenChoose(player: number, action: string, parts: string[]): string {\n    // Standard variant: choose one of two revealed cards to play\n    if (!this.state.sevenRevealedCards || this.state.sevenRevealedCards.length === 0) {\n      return \"No cards to choose from\";\n    }\n\n    // Handle scrap_seven with card ID\n    if (action === \"scrap_seven\") {\n      const cardId = parseInt(parts[1]);\n      const cardIndex = this.state.sevenRevealedCards.findIndex((c) => c.id === cardId);\n      if (cardIndex >= 0) {\n        const scrappedCard = this.state.sevenRevealedCards.splice(cardIndex, 1)[0];\n        this.state.scrap.push(scrappedCard);\n        // Put the other card back on top of deck\n        if (this.state.sevenRevealedCards.length > 0) {\n          this.state.deck.push(this.state.sevenRevealedCards[0]);\n        }\n      }\n      this.state.sevenRevealedCards = null;\n      this.state.phase = \"play\";\n      this.advanceTurn();\n      return \"Card scrapped (could not be played)\";\n    }\n\n    // Parse the action to find which card is being played\n    const playType = action.replace(\"seven_\", \"\");\n    const cardId = parseInt(parts[1]);\n\n    // Find the chosen card\n    const chosenIndex = this.state.sevenRevealedCards.findIndex((c) => c.id === cardId);\n    if (chosenIndex < 0) {\n      return \"Invalid card choice\";\n    }\n\n    const chosenCard = this.state.sevenRevealedCards[chosenIndex];\n    const otherCard = this.state.sevenRevealedCards[1 - chosenIndex];\n\n    // Put the other card back on top of deck\n    if (otherCard) {\n      this.state.deck.push(otherCard);\n    }\n    this.state.sevenRevealedCards = null;\n\n    // Now play the chosen card (same logic as handleResolveSeven)\n    switch (playType) {\n      case \"point\":\n        this.state.players[player].pointCards.push({\n          card: chosenCard,\n          attachedJacks: [],\n          controller: player,\n        });\n        break;\n\n      case \"oneoff\": {\n        const target =\n          parts.length > 3\n            ? { cardId: parseInt(parts[3]), type: parts[2] as \"permanent\" | \"pointCard\" }\n            : undefined;\n        this.state.pendingOneOff = {\n          card: chosenCard,\n          player,\n          target,\n          counterChain: [],\n        };\n        this.state.phase = \"counter\";\n        return `Player ${player} plays ${cardToString(chosenCard)} as one-off from 7`;\n      }\n\n      case \"permanent\": {\n        if (chosenCard.rank === \"J\") {\n          const targetId = parseInt(parts[2]);\n          const targetPc = this.findPointCard(targetId);\n          if (targetPc) {\n            targetPc.attachedJacks.push(chosenCard);\n            targetPc.controller = player;\n          }\n        } else {\n          const type = chosenCard.rank === \"8\" ? \"eight\" : chosenCard.rank === \"Q\" ? \"queen\" : \"king\";\n          this.state.players[player].permanents.push({ card: chosenCard, type });\n        }\n        break;\n      }\n\n      case \"scuttle\": {\n        const targetId = parseInt(parts[2]);\n        const targetPc = this.findPointCard(targetId);\n        if (targetPc) {\n          this.removePointCard(targetId);\n          this.state.scrap.push(chosenCard, targetPc.card, ...targetPc.attachedJacks);\n        }\n        break;\n      }\n\n      case \"joker\": {\n        // Joker steals a royal from an opponent\n        const targetCardId = parseInt(parts[2]);\n        for (let i = 0; i < this.state.players.length; i++) {\n          if (i === player) continue;\n          const permIndex = this.state.players[i].permanents.findIndex(\n            (p) => p.card.id === targetCardId\n          );\n          if (permIndex >= 0) {\n            const stolenPerm = this.state.players[i].permanents.splice(permIndex, 1)[0];\n            this.state.players[player].permanents.push({\n              card: stolenPerm.card,\n              type: stolenPerm.type,\n              stolenFromPlayer: i,\n            });\n            this.state.scrap.push(chosenCard);\n            this.state.phase = \"play\";\n            this.advanceTurn();\n            return `Player ${player} uses Joker from 7 to steal ${cardToString(stolenPerm.card)} from Player ${i}`;\n          }\n          for (const pc of this.state.players[i].pointCards) {\n            const jackIndex = pc.attachedJacks.findIndex((j) => j.id === targetCardId);\n            if (jackIndex >= 0) {\n              const stolenJack = pc.attachedJacks.splice(jackIndex, 1)[0];\n              this.state.players[player].hand.push(stolenJack);\n              const originalOwner = i;\n              pc.controller = pc.attachedJacks.length % 2 === 0 ? originalOwner : 1 - originalOwner;\n              this.state.scrap.push(chosenCard);\n              this.state.phase = \"play\";\n              this.advanceTurn();\n              return `Player ${player} uses Joker from 7 to steal ${cardToString(stolenJack)} from Player ${i}`;\n            }\n          }\n        }\n        this.state.scrap.push(chosenCard);\n        break;\n      }\n    }\n\n    this.state.phase = \"play\";\n    this.advanceTurn();\n    return `Player ${player} plays ${cardToString(chosenCard)} from 7`;\n  }\n\n  private removeCardFromHand(player: number, cardId: number): Card | undefined {\n    const hand = this.state.players[player].hand;\n    const index = hand.findIndex((c) => c.id === cardId);\n    if (index >= 0) {\n      return hand.splice(index, 1)[0];\n    }\n    return undefined;\n  }\n\n  private findPointCard(cardId: number): PointCard | undefined {\n    for (const player of this.state.players) {\n      for (const pc of player.pointCards) {\n        if (pc.card.id === cardId) return pc;\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Find the owner of a card (permanent, point card, or attached jack)\n   * Returns player index or -1 if not found\n   */\n  private findCardOwner(cardId: number): number {\n    for (let i = 0; i < this.state.players.length; i++) {\n      const player = this.state.players[i];\n      // Check permanents\n      for (const perm of player.permanents) {\n        if (perm.card.id === cardId) return i;\n      }\n      // Check point cards\n      for (const pc of player.pointCards) {\n        if (pc.card.id === cardId) return i;\n        // Check attached jacks\n        for (const jack of pc.attachedJacks) {\n          if (jack.id === cardId) {\n            // Jack owner is the controller of the point card\n            return pc.controller;\n          }\n        }\n      }\n    }\n    return -1;\n  }\n\n  private removePointCard(cardId: number): void {\n    for (const player of this.state.players) {\n      const index = player.pointCards.findIndex((pc) => pc.card.id === cardId);\n      if (index >= 0) {\n        player.pointCards.splice(index, 1);\n        return;\n      }\n    }\n  }\n\n  private removePermanent(cardId: number): void {\n    // Check regular permanents\n    for (const player of this.state.players) {\n      const index = player.permanents.findIndex((p) => p.card.id === cardId);\n      if (index >= 0) {\n        const perm = player.permanents.splice(index, 1)[0];\n        this.state.scrap.push(perm.card);\n        return;\n      }\n    }\n\n    // Check jacks\n    for (const player of this.state.players) {\n      for (const pc of player.pointCards) {\n        const jackIndex = pc.attachedJacks.findIndex((j) => j.id === cardId);\n        if (jackIndex >= 0) {\n          const jack = pc.attachedJacks.splice(jackIndex, 1)[0];\n          this.state.scrap.push(jack);\n          // Update controller based on remaining jacks\n          const originalOwner = this.state.players.indexOf(player);\n          pc.controller = pc.attachedJacks.length % 2 === 0 ? originalOwner : 1 - originalOwner;\n          return;\n        }\n      }\n    }\n  }\n\n  private returnCardToHand(cardId: number): void {\n    // Check permanents\n    for (let i = 0; i < this.state.players.length; i++) {\n      const player = this.state.players[i];\n      const permIndex = player.permanents.findIndex((p) => p.card.id === cardId);\n      if (permIndex >= 0) {\n        const perm = player.permanents.splice(permIndex, 1)[0];\n        player.hand.push(perm.card);\n        return;\n      }\n    }\n\n    // Check point cards\n    for (let i = 0; i < this.state.players.length; i++) {\n      const player = this.state.players[i];\n      const pcIndex = player.pointCards.findIndex((pc) => pc.card.id === cardId);\n      if (pcIndex >= 0) {\n        const pc = player.pointCards.splice(pcIndex, 1)[0];\n        // Return to original owner (who played the point card)\n        player.hand.push(pc.card);\n        // Jacks go to scrap\n        this.state.scrap.push(...pc.attachedJacks);\n        return;\n      }\n    }\n\n    // Check jacks\n    for (const player of this.state.players) {\n      for (const pc of player.pointCards) {\n        const jackIndex = pc.attachedJacks.findIndex((j) => j.id === cardId);\n        if (jackIndex >= 0) {\n          const jack = pc.attachedJacks.splice(jackIndex, 1)[0];\n          // Return jack to its controller\n          const jackController = (this.state.players.indexOf(player) + jackIndex + 1) % 2;\n          this.state.players[jackController].hand.push(jack);\n          // Update point card controller\n          const originalOwner = this.state.players.indexOf(player);\n          pc.controller = pc.attachedJacks.length % 2 === 0 ? originalOwner : 1 - originalOwner;\n          return;\n        }\n      }\n    }\n  }\n\n  private advanceTurn(): void {\n    this.state.turnNumber++;\n    const numPlayers = this.state.players.length;\n\n    // Advance to next player (cycling for 3+ players)\n    let nextPlayer = (this.state.currentPlayer + 1) % numPlayers;\n\n    // Handle skip turns (Cutthroat 9 effect)\n    let skipsChecked = 0;\n    while (this.state.skipTurnPlayers.includes(nextPlayer) && skipsChecked < numPlayers) {\n      // Remove this player from skip list (they're skipping now)\n      this.state.skipTurnPlayers = this.state.skipTurnPlayers.filter((p) => p !== nextPlayer);\n      nextPlayer = (nextPlayer + 1) % numPlayers;\n      skipsChecked++;\n    }\n\n    this.state.currentPlayer = nextPlayer;\n\n    // Reset discardingPlayer when turn advances\n    this.state.discardingPlayer = null;\n\n    // In standard/cutthroat variant, frozen cards thaw after the opponent's turn ends\n    // (i.e., when it becomes the owner's turn again, they can play the card)\n    // Clear frozen cards that belong to the new current player\n    if (this.config.variant !== \"classic\" && this.state.frozenCardIds.length > 0) {\n      const currentPlayer = this.state.currentPlayer;\n      const currentPlayerHand = this.state.players[currentPlayer].hand;\n      const currentPlayerCardIds = new Set(currentPlayerHand.map((c) => c.id));\n\n      // Only unfreeze cards that are in the current player's hand\n      this.state.frozenCardIds = this.state.frozenCardIds.filter(\n        (id) => !currentPlayerCardIds.has(id)\n      );\n    }\n  }\n\n  private checkGameEnd(): void {\n    if (this.state.phase === \"complete\") return;\n\n    const numPlayers = this.state.players.length;\n\n    // Check for consecutive passes (3 for 2-player, numPlayers for 3+)\n    const passesNeeded = numPlayers === 2 ? 3 : numPlayers;\n    if (this.state.consecutivePasses >= passesNeeded) {\n      this.state.isDraw = true;\n      this.state.phase = \"complete\";\n      return;\n    }\n\n    // Check if any player has reached their goal\n    for (let i = 0; i < numPlayers; i++) {\n      const points = this.getPoints(i);\n      const goal = this.getPointGoal(i);\n\n      // In standard/cutthroat variant, 4 kings = goal of 0 = instant win\n      if (goal === 0) {\n        this.state.winner = i;\n        this.state.phase = \"complete\";\n        return;\n      }\n\n      if (points >= goal) {\n        this.state.winner = i;\n        this.state.phase = \"complete\";\n        return;\n      }\n    }\n  }\n\n  render(): void {\n    console.log(\"\\n\" + \"=\".repeat(60));\n    console.log(`CUTTLE (${this.config.variant})`);\n    console.log(\"=\".repeat(60));\n    console.log(`Turn: ${this.state.turnNumber} | Phase: ${this.state.phase}`);\n    console.log(`Current player: ${this.state.currentPlayer}`);\n    console.log(`Deck: ${this.state.deck.length} cards | Scrap: ${this.state.scrap.length} cards`);\n\n    for (let i = 0; i < this.state.players.length; i++) {\n      const p = this.state.players[i];\n      const marker = i === this.state.currentPlayer ? \"-> \" : \"   \";\n      const points = this.getPoints(i);\n      const goal = this.getPointGoal(i);\n      const skipMarker = this.state.skipTurnPlayers.includes(i) ? \" [SKIP]\" : \"\";\n\n      console.log(`\\n${marker}Player ${i}: ${points}/${goal} points${skipMarker}`);\n      console.log(`   Hand (${p.hand.length}): ${p.hand.map((c) => c.isJoker ? \"\uD83C\uDCCF\" : cardToString(c)).join(\" \")}`);\n      console.log(\n        `   Points: ${p.pointCards\n          .filter((pc) => pc.controller === i)\n          .map((pc) => cardToString(pc.card) + (pc.attachedJacks.length > 0 ? `(J\u00D7${pc.attachedJacks.length})` : \"\"))\n          .join(\" \")}`\n      );\n      console.log(`   Permanents: ${p.permanents.map((pm) => pm.card.isJoker ? \"\uD83C\uDCCF\" : cardToString(pm.card)).join(\" \")}`);\n    }\n\n    if (this.state.lastAction) {\n      console.log(`\\nLast: ${this.state.lastAction}`);\n    }\n    if (this.state.winner !== null) {\n      console.log(`\\n*** PLAYER ${this.state.winner} WINS ***`);\n    }\n    if (this.state.isDraw) {\n      console.log(`\\n*** GAME IS A DRAW ***`);\n    }\n  }\n}\n\n// ============================================================================\n// Action Encoding Helpers\n// ============================================================================\n\nexport function getMaxActionSpaceSize(): number {\n  // Rough upper bound for action space:\n  // draw, pass = 2\n  // point per card = 52\n  // oneoff variations = 52 * 52 (card + target combinations)\n  // permanent = 52 + (52 * 52 for jacks)\n  // scuttle = 52 * 52\n  // counter = 52\n  // choose (for 3) = 52\n  // discard = 52\n  // seven variations = similar to normal play\n  // Simplified to a reasonable upper bound\n  return 500;\n}\n"],
  "mappings": "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",
  "names": ["cardId"]
}
